% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_crsp_monthly.R
\name{fetch_crsp_monthly}
\alias{fetch_crsp_monthly}
\title{Fetch CRSP Monthly Stock Returns}
\usage{
fetch_crsp_monthly(start_date, end_date)
}
\arguments{
\item{start_date}{Character or Date. Start of the sample period (inclusive).}

\item{end_date}{Character or Date. End of the sample period (inclusive).}
}
\value{
A tibble with columns: permno, date, ret, shrout, prc, primaryexch,
siccd, mktcap, mktcap_lag, exchange, gvkey.
}
\description{
Retrieves monthly stock return data from the CRSP Monthly Stock File
(crsp.msf_v2) via WRDS, filtered to common US equities on major exchanges.
Computes market capitalization, lagged market capitalization, and merges
CRSP-Compustat linking information.
}
\details{
The function applies the following standard filters via the CRSP
security info history table (crsp.stksecurityinfohist):
\itemize{
\item Common shares (sharetype = "NS", securitytype = "EQTY",
securitysubtype = "COM")
\item US-incorporated firms (usincflg = "Y")
\item Corporate issuers (issuertype in "ACOR", "CORP")
\item Major exchanges (primaryexch in "N", "A", "Q")
\item Standard conditional types (conditionaltype in "RW", "NW")
\item Actively trading (tradingstatusflg = "A")
}

Market capitalization is computed as shares outstanding times price,
expressed in millions. Lagged market capitalization is the prior month's
value. CRSP-Compustat linking uses the CCM linking table with link types
"LU" and "LC" and primary link indicators "P" and "C".

Requires WRDS credentials set in environment variables (WRDS_USER, WRDS_PASSWORD).

Based on the \href{https://www.tidy-finance.org/}{Tidy Finance} implementation.
}
\examples{
\dontrun{
crsp_monthly <- fetch_crsp_monthly(
  start_date = "2000-01-01",
  end_date = "2023-12-31"
)
}
}
